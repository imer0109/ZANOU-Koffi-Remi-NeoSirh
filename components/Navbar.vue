<template>
    <div>
        <nav class="navbar" id="navbar" @scroll="handleScroll">
            <div class="container relative flex lg:flex-nowrap md:flex-nowrap flex-wrap items-center justify-between">
                <a class="navbar-brand md:me-8" href="#home">
                    <img src="../assets/images/logo-sirh.png"
                        class="inline-block dark:hidden max-w-[220px] max-h-[86px]" alt="">
                </a>

                <div class="nav-icons flex items-center lg_992:order-2 ms-auto md:ms-8">
                    <!-- Navbar Button -->
                    <!-- <ul class="list-none menu-social mb-0">
                        <li class="inline">
                            <a href=""
                                class="h-8 px-4 text-[12px] tracking-wider inline-flex items-center justify-center font-medium rounded-md bg-teal-500 text-white uppercase">Démo</a>
                        </li>
                    </ul> -->
                    <!-- Navbar Collapse Manu Button -->
                    <button data-collapse="menu-collapse" type="button"
                        class="collapse-btn inline-flex items-center ms-2 text-dark dark:text-white lg_992:hidden"
                        aria-controls="menu-collapse" aria-expanded="false" @click="handler">
                        <span class="sr-only">Navigation Menu</span>
                        <i class="mdi mdi-menu text-[24px]"></i>
                    </button>
                </div>

                <!-- Navbar Manu -->

                <div class="navigation lg_992:order-1 lg_992:flex !ms-auto" :class="{ hidden: !toggle }"
                    id="menu-collapse">
                    <ul class="navbar-nav" id="navbar-navlist">
                        <li class="nav-item ms-0 active home">
                            <a class="nav-link" href="#home">Accueil</a>
                        </li>
                        <li class="nav-item ms-0 services">
                            <a class="nav-link" href="#services">Nos missions</a>
                        </li>
                        <li class="nav-item ms-0 whyNeoSirh">
                            <a class="nav-link" href="#whyNeoSirh">Pourquoi NEO SIRH ?</a>
                        </li>
                        <li class="nav-item ms-0 about">
                            <a class="nav-link" href="#about">Qui sommes-nous? </a>
                        </li>

                        <!-- <li class="nav-item ms-0 about">
                            <a class="nav-link" href="#about">About</a>
                        </li>
                        <li class="nav-item ms-0 review">
                            <a class="nav-link" href="#review">Testimonial</a>
                        </li>
                        <li class="nav-item ms-0 pricing">
                            <a class="nav-link" href="#pricing">Pricing</a>
                        </li>
                        <li class="nav-item ms-0 blog">
                            <a class="nav-link" href="#blog">Blogs</a>
                        </li> -->
                        <!-- <li class="nav-item ms-0 contact">
                            <a class="nav-link" href="#contact">Contact</a>
                        </li> -->

                        <li class="nav-item ms-0 contact">
                            <a href="https://demo.neosirh.com" target="_blank"
                                class="h-[45px] px-[35px] py-4 lg:ml-10 bg-[#0097b2] rounded-[20px] justify-center items-center inline-flex">
                                <div class="w-5 h-5 justify-center items-center flex">
                                    <img src="../assets/images/demo.png" alt="Icône Démo" class="w-4 h-4">
                                </div>
                                <span class="text-center text-white text-base font-semibold leading-normal">Démo</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

        </nav>
    </div>
</template>

<script>

export default {
    components: {

    },
    data() {
        return {
            toggle: false,
            scroll: true,
            sections: document.querySelectorAll("section"),
            navLi: document.querySelectorAll("nav .container .navigation ul li"),
            current: "",
            sectionTop: null,
            // myElement:""
        }
    },
    created() {
        window.addEventListener('scroll', this.handleScroll);
        window.addEventListener('scroll', this.onscroll);
    },

    unmounted() {
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('scroll', this.onscroll);
    },

    methods: {
        handler: function () {
            this.toggle = !this?.toggle;
        },
        handleScroll(event) {
            const navbar = document.getElementById("navbar");
            if (
                document.body.scrollTop >= 50 ||
                document.documentElement.scrollTop >= 50
            ) {
                navbar.classList.add("is-sticky");
            } else {
                navbar.classList.remove("is-sticky");
            }
        },

        onscroll() {
            document.querySelectorAll("section").forEach((section) => {
                this.sectionTop = section.offsetTop;
                if (pageYOffset >= this.sectionTop - 60) {
                    this.current = section.getAttribute("id");
                    console.log(this.current, "hello");
                } else { }
            });
            document.querySelectorAll("nav .container .navigation ul li").forEach((li) => {
                if (li.classList.contains(this.current)) {
                    li.classList.add("active");
                } else {
                    li.classList.remove("active");
                }
            });
        }
    },


}
</script>

<style>
.custom-bg {
    background-color: #e71212;
}
</style>